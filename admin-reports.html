<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Reports | The Pearl Vista</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    body { background: #fff; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; color: #333; }
    .admin-dashboard { display: flex; min-height: 100vh; }
    .sidebar { background: #1a1a1a; color: #fff; width: 280px; padding: 2rem 1.5rem 1rem 1.5rem; display: flex; flex-direction: column; gap: 2rem; min-height: 100vh; box-shadow: 0 0 30px rgba(0, 0, 0, 0.1); border-right: 1px solid #e0e0e0; }
    .sidebar .logo { font-size: 1.5rem; font-weight: 700; letter-spacing: 1px; margin-bottom: 2rem; color: #d4af37; text-align: center; padding: 1rem; background: #222; border-radius: 12px; border: 1px solid #333; }
    .sidebar nav { display: flex; flex-direction: column; gap: 0.5rem; }
    .sidebar nav a { color: #fff; text-decoration: none; padding: 1rem 1.2rem; border-radius: 12px; font-weight: 500; transition: all 0.3s ease; display: flex; align-items: center; gap: 12px; font-size: 0.95rem; border: 1px solid transparent; }
    .sidebar nav a i { width: 20px; text-align: center; font-size: 1.1rem; color: #d4af37; }
    .sidebar nav a.active, .sidebar nav a:hover { background: #d4af37; color: #000; border-color: #d4af37; transform: translateX(5px); box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3); }
    .sidebar nav a.active i, .sidebar nav a:hover i { color: #000; }
    .main-content { flex: 1; padding: 2rem 3rem; display: flex; flex-direction: column; gap: 2rem; background: #fff; min-height: 100vh; }
    .topbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; padding: 1.5rem; background: #fff; border-radius: 15px; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08); border: 1px solid #e0e0e0; }
    .page-title { font-size: 2rem; font-weight: 600; color: #333; display: flex; align-items: center; gap: 12px; }
    .page-title i { color: #d4af37; }
        .admin-profile {
      display: flex; 
      align-items: center; 
      gap: 1rem; 
      cursor: pointer; 
      position: relative; 
      color: #333; 
      padding: 1rem 1.5rem; 
      border-radius: 15px; 
      transition: all 0.3s ease; 
      border: 2px solid #d4af37;
      background: #f8f9fa;
      box-shadow: 0 2px 8px rgba(212, 175, 55, 0.1);
    }
    .admin-profile:hover {
      background: #fff; 
      border-color: #d4af37;
      box-shadow: 0 4px 12px rgba(212, 175, 55, 0.2);
    }
    .admin-profile .avatar { 
      width: 45px; 
      height: 45px; 
      border-radius: 50%; 
      background: #d4af37 !important; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      font-weight: bold; 
      color: #000 !important; 
      font-size: 1.2rem;
      box-shadow: 0 3px 10px rgba(212, 175, 55, 0.3);
    }
    
    .admin-role {
      font-size: 0.8rem;
      color: #d4af37 !important;
      font-weight: 500;
    }
    #adminDropdown { 
      display: none; 
      position: absolute; 
      top: 60px; 
      right: 0; 
      background: #fff; 
      color: #333; 
      border-radius: 15px; 
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15); 
      min-width: 200px; 
      padding: 1rem; 
      font-size: 0.9rem; 
      z-index: 1000; 
      border: 1px solid #e0e0e0;
    }
    @keyframes dropdownFadeIn {
      from { opacity: 0; transform: translateY(-15px) scale(0.95); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }
    .admin-info {
      display: flex;
      flex-direction: column;
    }
    .admin-name {
      font-weight: 700;
      color: #333;
      font-size: 1rem;
    }
    .admin-role {
      font-size: 0.85rem;
      color: #d4af37 !important;
      font-weight: 500;
    }
    .dropdown-item {
      padding: 0.8rem 1rem;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 10px;
      border: 1px solid transparent;
    }
    .dropdown-item:hover {
      background: #f8f9fa;
      color: #d4af37;
      border-color: #d4af37;
    }
    .dropdown-item i {
      width: 16px;
      text-align: center;
      color: #d4af37 !important;
    }
    
    .dropdown-item:hover i {
      color: #d4af37 !important;
    }
    
    #adminDropdown .dropdown-item i {
      color: #d4af37 !important;
    }
    
    /* More specific rules to ensure golden icons */
    .admin-profile #adminDropdown .dropdown-item i {
      color: #d4af37 !important;
    }
    
    .admin-profile #adminDropdown .dropdown-item:hover i {
      color: #d4af37 !important;
    }
    
    /* Override any conflicting styles */
    .admin-profile #adminDropdown i {
      color: #d4af37 !important;
    }
    
    /* Ensure all dropdown icons are golden */
    #adminDropdown i {
      color: #d4af37 !important;
    }
    
    /* Most specific rule to override any external CSS */
    body .admin-profile #adminDropdown .dropdown-item i {
      color: #d4af37 !important;
    }
    
    body .admin-profile #adminDropdown .dropdown-item:hover i {
      color: #d4af37 !important;
    }
    
    /* Override any FontAwesome or external icon styles */
    .fa, .fas, .far, .fal {
      color: #d4af37 !important;
    }
    
    #adminDropdown .fa,
    #adminDropdown .fas,
    #adminDropdown .far,
    #adminDropdown .fal {
      color: #d4af37 !important;
    }
    
    /* Most specific rules for dropdown icons */
    .admin-profile #adminDropdown .dropdown-item .fas {
      color: #d4af37 !important;
    }
    
    .admin-profile #adminDropdown .dropdown-item .fa {
      color: #d4af37 !important;
    }
    
    /* Target specific icons */
    .admin-profile #adminDropdown .dropdown-item .fa-user {
      color: #d4af37 !important;
    }
    
    .admin-profile #adminDropdown .dropdown-item .fa-cog {
      color: #d4af37 !important;
    }
    
    .admin-profile #adminDropdown .dropdown-item .fa-user-plus {
      color: #d4af37 !important;
    }
    
    .admin-profile #adminDropdown .dropdown-item .fa-sign-out-alt {
      color: #d4af37 !important;
    }
    
    /* Additional specific targeting for settings and logout */
    #adminDropdown .fa-cog {
      color: #d4af37 !important;
    }
    
    #adminDropdown .fa-sign-out-alt {
      color: #d4af37 !important;
    }
    
    /* Even more specific targeting */
    .admin-profile #adminDropdown .dropdown-item i.fa-cog {
      color: #d4af37 !important;
    }
    
    .admin-profile #adminDropdown .dropdown-item i.fa-sign-out-alt {
      color: #d4af37 !important;
    }
    
    /* Override any external CSS */
    body .admin-profile #adminDropdown .dropdown-item i.fa-cog {
      color: #d4af37 !important;
    }
    
    body .admin-profile #adminDropdown .dropdown-item i.fa-sign-out-alt {
      color: #d4af37 !important;
    }
    
    /* Ensure icons are golden on hover */
    .admin-profile #adminDropdown .dropdown-item:hover .fas,
    .admin-profile #adminDropdown .dropdown-item:hover .fa {
      color: #d4af37 !important;
    }
    .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem; }
    .stat-card { background: #fff; padding: 1.5rem; border-radius: 15px; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08); transition: all 0.3s ease; border: 1px solid #e0e0e0; border-left: 4px solid #d4af37; }
    .stat-card:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12); border-color: #d4af37; }
    .stat-card h3 { color: #333; font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem; }
    .stat-card .number { font-size: 2.5rem; font-weight: 700; color: #d4af37; margin-bottom: 0.5rem; }
    .stat-card .change { color: #28a745; font-size: 0.9rem; font-weight: 500; }
    
    /* Insights Grid Styling */
    .insights-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
      margin-top: 2rem;
    }
    
    .insight-panel {
      background: #1a1a1a;
      border-radius: 15px;
      padding: 1.5rem;
      border: 2px solid #fff;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
      transition: all 0.3s ease;
    }
    
    .insight-panel:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    }
    
    .insight-panel h3 {
      color: #d4af37;
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 1rem;
      text-align: center;
      letter-spacing: 0.5px;
    }
    
    .insight-content {
      min-height: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 0.9rem;
      flex-direction: column;
      padding: 1rem;
    }
    
    #targetProgressContent {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
      padding: 1.5rem 1rem;
      min-height: 140px;
      flex-direction: column;
      gap: 1rem;
    }
    
    .target-info {
      text-align: center;
      margin-bottom: 0.5rem;
    }
    
    .target-label {
      color: #fff;
      font-size: 0.85rem;
      font-weight: 500;
      opacity: 0.8;
      margin-bottom: 0.25rem;
    }
    
    .target-amount {
      color: #d4af37;
      font-size: 1.2rem;
      font-weight: 700;
    }
    
    .target-stats {
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-top: 0.5rem;
    }
    
    .stat-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.25rem;
    }
    
    .stat-label {
      color: #fff;
      font-size: 0.75rem;
      font-weight: 500;
      opacity: 0.7;
    }
    
    .stat-value {
      color: #d4af37;
      font-size: 0.9rem;
      font-weight: 600;
    }
    
    .progress-container {
      width: 100%;
      max-width: 280px;
      background: #333;
      border-radius: 12px;
      height: 35px;
      position: relative;
      overflow: hidden;
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);
      margin: 1rem auto;
    }
    
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #d4af37, #f4d03f);
      border-radius: 12px;
      transition: width 0.8s ease;
      width: 0%;
      position: relative;
      box-shadow: 0 2px 4px rgba(212, 175, 55, 0.3);
    }
    
    .progress-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #fff;
      font-weight: 700;
      font-size: 1.1rem;
      z-index: 10;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
      letter-spacing: 0.5px;
      line-height: 1;
    }
    
    /* Insight content styling */
    .room-item, .customer-item, .trend-item, .feedback-item, .channel-item {
      padding: 0.5rem;
      margin: 0.25rem 0;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      font-size: 0.85rem;
      text-align: center;
    }
    
    .insight-content div {
      margin: 0.5rem 0;
    }
    
    .reports-section { background: #101a2b; color: #FFD700; border-radius: 12px; box-shadow: 0 1px 4px rgba(0,0,0,0.06); padding: 1rem 1.2rem; margin-bottom: 2rem; }
    .reports-section h3 { color: #FFD700; font-size: 1.1rem; font-weight: 700; margin-bottom: 1em; }
    .bar-chart-placeholder { width: 100%; height: 180px; background: linear-gradient(90deg, #FFD70022 0%, #fff 100%); border-radius: 8px; display: flex; align-items: flex-end; gap: 0.5rem; padding: 1rem 0; }
    .bar { flex: 1; background: #FFD700; border-radius: 4px 4px 0 0; min-width: 10px; transition: height 0.3s; }
    .progress-bar-container { width: 100%; background: #fff; border-radius: 8px; height: 32px; margin-top: 1em; }
    .progress-bar { height: 100%; background: #FFD700; border-radius: 8px; text-align: right; padding-right: 1em; font-weight: 700; color: #101a2b; line-height: 32px; }
  </style>
</head>
<body>
  <div class="admin-dashboard">
    <div class="sidebar">
      <div class="logo">
        <i class="fas fa-gem"></i> The Pearl Vista
      </div>
      <nav>
        <a href="admin-dashboard.html">
          <i class="fas fa-tachometer-alt"></i>
          Dashboard
        </a>
        <a href="admin-rooms.html">
          <i class="fas fa-bed"></i>
          Rooms
        </a>
        <a href="admin-bookings.html">
          <i class="fas fa-calendar-check"></i>
          Bookings
        </a>
        <a href="admin-customers.html">
          <i class="fas fa-users"></i>
          Customers
        </a>
        <a href="admin-services.html">
          <i class="fas fa-concierge-bell"></i>
          Services
        </a>
        <a href="admin-tour-bookings.html">
          <i class="fas fa-map-marked-alt"></i>
          Tour Bookings
        </a>
        <a href="admin-chat.html">
          <i class="fas fa-comments"></i>
          Chat Support
        </a>
        <a href="admin-reports.html" class="active">
          <i class="fas fa-chart-bar"></i>
          Reports
        </a>
        <a href="admin-settings.html">
          <i class="fas fa-cog"></i>
          Settings
        </a>
      </nav>
    </div>
    <div class="main-content">
      <div class="topbar">
        <div class="page-title">
          <i class="fas fa-chart-bar"></i>
          Reports
        </div>
        <div class="admin-profile" onclick="toggleDropdown()">
          <div class="avatar">A</div>
          <div class="admin-info">
            <div class="admin-name">System Administrator</div>
            <div class="admin-role">super_admin</div>
          </div>
          <div id="adminDropdown">
            <div class="dropdown-item" onclick="window.location.href='admin-profile.html'">
              <i class="fas fa-user"></i>
              Profile
            </div>
            <div class="dropdown-item" onclick="window.location.href='admin-settings.html'">
              <i class="fas fa-cog" style="color: #d4af37 !important;"></i>
              Settings
            </div>
            <div class="dropdown-item" onclick="window.location.href='admin-add-user.html'">
              <i class="fas fa-user-plus" style="color: #d4af37 !important;"></i>
              Add User
            </div>
            <div class="dropdown-item" onclick="window.location.href='logout.php'">
              <i class="fas fa-sign-out-alt" style="color: #d4af37 !important;"></i>
              Logout
            </div>
          </div>
        </div>
      </div>
      
      <div class="stats-grid" id="reportsStatsGrid">
        <!-- Stats will be loaded here dynamically -->
      </div>
        <script>
        // Fetch dynamic stats for reports page
        fetch('Backend/get_reports_stats.php')
          .then(res => res.json())
          .then(data => {
            if (!data.success) return;
            const stats = data.stats;
            document.getElementById('reportsStatsGrid').innerHTML = `
              <div class="stat-card">
                <h3>Total Bookings</h3>
                <div class="number">${stats.total_bookings}</div>
                <div class="change">${stats.bookings_change}</div>
              </div>
              <div class="stat-card">
                <h3>Revenue</h3>
                <div class="number">${stats.revenue}</div>
                <div class="change">${stats.revenue_change}</div>
              </div>
              <div class="stat-card">
                <h3>Occupancy Rate</h3>
                <div class="number">${stats.occupancy_rate}</div>
                <div class="change">${stats.occupancy_change}</div>
              </div>
              <div class="stat-card">
                <h3>Guest Satisfaction</h3>
                <div class="number">${stats.guest_satisfaction}</div>
                <div class="change">${stats.satisfaction_change}</div>
              </div>
            `;
          });

        // Load insights data from backend
        function loadInsightsData() {
          // Top Performing Rooms
          fetch('Backend/get_top_rooms.php')
            .then(res => res.json())
            .then(data => {
              if (data.success && data.rooms) {
                const roomsHtml = data.rooms.map(room => 
                  `<div class="room-item">${room.room_number} - ${room.bookings} bookings</div>`
                ).join('');
                document.getElementById('topRoomsContent').innerHTML = roomsHtml;
              } else {
                document.getElementById('topRoomsContent').innerHTML = '<div>No data available</div>';
              }
            });

          // Most Loyal Customers
          fetch('Backend/get_loyal_customers.php')
            .then(res => res.json())
            .then(data => {
              if (data.success && data.customers) {
                const customersHtml = data.customers.map(customer => 
                  `<div class="customer-item">${customer.name} - ${customer.bookings} stays</div>`
                ).join('');
                document.getElementById('loyalCustomersContent').innerHTML = customersHtml;
              } else {
                document.getElementById('loyalCustomersContent').innerHTML = '<div>No data available</div>';
              }
            });

          // Cancellation Trends
          fetch('Backend/get_cancellation_trends.php')
            .then(res => res.json())
            .then(data => {
              if (data.success && data.trends) {
                const trendsHtml = data.trends.map(trend => 
                  `<div class="trend-item">${trend.month}: ${trend.cancellations} cancellations</div>`
                ).join('');
                document.getElementById('cancellationContent').innerHTML = trendsHtml;
              } else {
                document.getElementById('cancellationContent').innerHTML = '<div>No data available</div>';
              }
            });

          // Monthly Target Progress
          fetch('Backend/get_target_progress.php')
            .then(res => res.json())
            .then(data => {
              if (data.success) {
                const progress = data.progress || 0;
                const currentAmount = data.current_amount || 0;
                const targetAmount = data.target_amount || 45000;
                const remainingAmount = targetAmount - currentAmount;
                
                // Update progress bar
                document.getElementById('targetProgressBar').style.width = progress + '%';
                document.getElementById('progressText').textContent = progress + '%';
                
                // Update amounts
                document.getElementById('currentAmount').textContent = '$' + currentAmount.toLocaleString();
                document.getElementById('remainingAmount').textContent = '$' + remainingAmount.toLocaleString();
                
                // Update target amount
                document.querySelector('.target-amount').textContent = '$' + targetAmount.toLocaleString();
                
                // Add animation
                setTimeout(() => {
                  document.getElementById('targetProgressBar').style.transition = 'width 1s ease-in-out';
                }, 100);
              }
            });

          // Customer Feedback
          fetch('Backend/get_customer_feedback.php')
            .then(res => res.json())
            .then(data => {
              if (data.success && data.feedback) {
                const feedbackHtml = data.feedback.map(feedback => 
                  `<div class="feedback-item">${feedback.rating}/5 - ${feedback.comment}</div>`
                ).join('');
                document.getElementById('feedbackContent').innerHTML = feedbackHtml;
              } else {
                document.getElementById('feedbackContent').innerHTML = '<div>No data available</div>';
              }
            });

          // Most Booked Channel
          fetch('Backend/get_booked_channels.php')
            .then(res => res.json())
            .then(data => {
              if (data.success && data.channels) {
                const channelsHtml = data.channels.map(channel => 
                  `<div class="channel-item">${channel.name}: ${channel.bookings} bookings</div>`
                ).join('');
                document.getElementById('bookedChannelContent').innerHTML = channelsHtml;
              } else {
                document.getElementById('bookedChannelContent').innerHTML = '<div>No data available</div>';
              }
            });
        }

        // Load insights when page loads
        document.addEventListener('DOMContentLoaded', function() {
          loadInsightsData();
        });
        </script>

        <div class="content-grid">
          <div class="recent-activity">
            <h3>
              <i class="fas fa-chart-line"></i>
              Booking Trends
            </h3>
            <div class="activity-item">
              <div class="activity-icon">
                <i class="fas fa-chart-bar"></i>
              </div>
              <div class="activity-content">
                <h4>Monthly Revenue</h4>
                <p>Revenue increased by 15% compared to last month</p>
              </div>
            </div>
            <div class="activity-item">
              <div class="activity-icon">
                <i class="fas fa-users"></i>
              </div>
              <div class="activity-content">
                <h4>Guest Demographics</h4>
                <p>45% international guests, 55% domestic</p>
              </div>
            </div>
            <div class="activity-item">
              <div class="activity-icon">
                <i class="fas fa-star"></i>
              </div>
              <div class="activity-content">
                <h4>Top Rated Rooms</h4>
                <p>Deluxe rooms receive highest satisfaction ratings</p>
              </div>
            </div>
            <div class="activity-item">
              <div class="activity-icon">
                <i class="fas fa-calendar-check"></i>
              </div>
              <div class="activity-content">
                <h4>Peak Booking Times</h4>
                <p>Weekends show 40% higher booking rates</p>
              </div>
            </div>
          </div>

          <div class="quick-actions">
            <h3>
              <i class="fas fa-bolt"></i>
              Quick Actions
            </h3>
            <div class="action-buttons">
              <a href="admin-bookings.html" class="action-btn">
                <i class="fas fa-calendar-check"></i>
                View Bookings
              </a>
              <a href="admin-rooms.html" class="action-btn">
                <i class="fas fa-bed"></i>
                Manage Rooms
              </a>
              <a href="admin-customers.html" class="action-btn">
                <i class="fas fa-users"></i>
                Customer Data
              </a>
              <a href="admin-reports.html" class="action-btn">
                <i class="fas fa-chart-line"></i>
                Generate Report
              </a>
            </div>
          </div>
        </div>

        <div class="chart-container">
          <h3>
            <i class="fas fa-chart-area"></i>
            Revenue Overview
          </h3>
          <div class="chart-placeholder">
            <i class="fas fa-chart-area"></i>
            Chart will be displayed here
          </div>
        </div>
        <!-- INSIGHTS PANELS -->
        <div class="insights-grid">
          <div class="insight-panel">
            <h3>Top Performing Rooms</h3>
            <div id="topRoomsContent" class="insight-content">
              <!-- Data will be loaded from backend -->
            </div>
          </div>
          <div class="insight-panel">
            <h3>Most Loyal Customers</h3>
            <div id="loyalCustomersContent" class="insight-content">
              <!-- Data will be loaded from backend -->
            </div>
          </div>
          <div class="insight-panel">
            <h3>Cancellation Trends</h3>
            <div id="cancellationContent" class="insight-content">
              <!-- Data will be loaded from backend -->
            </div>
          </div>
          <div class="insight-panel">
            <h3>Monthly Target Progress</h3>
            <div id="targetProgressContent" class="insight-content">
              <div class="target-info">
                <div class="target-label">Revenue Target</div>
                <div class="target-amount">$45,000</div>
              </div>
              <div class="progress-container">
                <div class="progress-bar" id="targetProgressBar"></div>
                <div class="progress-text" id="progressText">0%</div>
              </div>
              <div class="target-stats">
                <div class="stat-item">
                  <span class="stat-label">Current</span>
                  <span class="stat-value" id="currentAmount">$0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Remaining</span>
                  <span class="stat-value" id="remainingAmount">$45,000</span>
                </div>
              </div>
            </div>
          </div>
          <div class="insight-panel">
            <h3>Customer Feedback</h3>
            <div id="feedbackContent" class="insight-content">
              <!-- Data will be loaded from backend -->
            </div>
          </div>
          <div class="insight-panel">
            <h3>Most Booked Channel</h3>
            <div id="bookedChannelContent" class="insight-content">
              <!-- Data will be loaded from backend -->
            </div>
          </div>
        </div>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.min.css" />
        <style>
          .kpi-cards-row.simple {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 1.5em;
            max-width: 1200px;
            margin: 0 auto 2em auto;
          }
          .kpi-card.simple {
            background: #f8fafc;
            color: #222;
            border-radius: 10px;
            box-shadow: none;
            padding: 1.2em 1em;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 0;
            min-height: 80px;
            border: 1px solid #e6e6e6;
            justify-content: center;
          }
          .kpi-label { font-size: 1em; color: #555; font-weight: 600; text-align: center; }
          .kpi-value { font-size: 2em; font-weight: 800; color: #2d5be3; margin-bottom: 0.2em; }
          .kpi-card.simple canvas { margin-top: 0.2em; }
          .filter-bar.simple {
            display: flex;
            gap: 1em;
            align-items: center;
            background: #fff;
            border-radius: 8px;
            padding: 0.7em 1.5em;
            margin-bottom: 2em;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            box-shadow: none;
            border: 1px solid #e6e6e6;
          }
          .filter-bar.simple input, .filter-bar.simple select {
            padding: 0.4em 0.8em;
            border-radius: 6px;
            border: 1px solid #ccc;
            font-size: 1em;
          }
          .filter-bar.simple button {
            background: #2d5be3;
            color: #fff;
            border: none;
            border-radius: 7px;
            padding: 0.6em 1.2em;
            font-size: 1em;
            font-weight: 700;
            cursor: pointer;
            transition: background 0.18s, box-shadow 0.18s;
          }
          .filter-bar.simple button:hover, .filter-bar.simple button:focus {
            background: #1746a2;
            box-shadow: 0 2px 8px rgba(45,91,227,0.10);
            outline: none;
          }
          .filter-bar.simple button:active {
            background: #11336b;
          }
          .charts-row.simple {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2em;
            max-width: 900px;
            margin: 0 auto 2em auto;
          }
          .chart-card.simple {
            background: #fff;
            border-radius: 10px;
            box-shadow: none;
            padding: 1.2em 1em 1.5em 1em;
            display: flex;
            flex-direction: column;
            align-items: center;
            border: 1px solid #e6e6e6;
          }
          .insights-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2em;
            max-width: 1200px;
            margin: 0 auto 2em auto;
          }
          @media (max-width: 1200px) {
            .insights-row { grid-template-columns: 1fr 1fr; }
          }
          @media (max-width: 900px) {
            .insights-row { grid-template-columns: 1fr; }
          }
          .insight-card {
            background: #101a2b;
            color: #FFD700;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(25,118,210,0.10);
            padding: 1.8em 2em 1.5em 2em;
            min-height: 180px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: flex-start;
          }
          .insight-card h3 {
            color: #FFD700;
            font-size: 1.25rem;
            font-weight: 800;
            margin-bottom: 1em;
            text-align: left;
            width: 100%;
          }
          .insight-card ul {
            padding-left: 1.2em;
            margin: 0 0 0.5em 0;
            list-style: disc inside;
            color: #FFD700;
            font-size: 1.08em;
          }
          .insight-card li {
            margin-bottom: 0.3em;
            padding-left: 0.1em;
          }
          .insight-card .progress-bar-container {
            margin-top: 0.7em;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
          }
          .insight-card .progress-bar {
            font-size: 1.1em;
            font-weight: 700;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
          }
          .insight-card #feedbackSummary {
            color: #FFD700;
            font-size: 1.08em;
            text-align: left;
          }
          .insight-card #feedbackSummary div {
            margin-bottom: 0.4em;
          }
          .progress-bar-container { 
            width: 100%; 
            background: #fff; 
            border-radius: 8px; 
            height: 32px; 
            margin-top: 1em; 
            overflow: hidden;
            position: relative;
          }
          .progress-bar { 
            height: 100%; 
            background: #FFD700; 
            border-radius: 8px; 
            text-align: right; 
            padding-right: 1em; 
            font-weight: 700; 
            color: #101a2b; 
            line-height: 32px;
            transition: width 0.3s ease;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: flex-end;
          }
          .insight-card ul#mostBookedChannelList {
            margin-top: 0.2em;
          }
          .insight-card ul#mostBookedChannelList li {
            font-size: 1.08em;
            margin-bottom: 0.3em;
          }
          @media (max-width: 900px) {
            .kpi-cards-row.simple { grid-template-columns: 1fr 1fr; }
            .charts-row.simple { grid-template-columns: 1fr; }
          }
          @media (max-width: 600px) {
            .kpi-cards-row, .charts-row, .insights-row { grid-template-columns: 1fr; }
          }
          .filter-bar.simple input[type="date"]::placeholder {
            color: #888;
            font-size: 1em;
            letter-spacing: 0.5px;
          }
          .chart-heading {
            font-size: 1.1em;
            font-weight: 700;
            color: #222;
            margin-bottom: 0.7em;
            text-align: center;
          }

          /* Dropdown item styling for consistent icon colors */
          .dropdown-item {
              padding: 0.8rem 1rem;
              border-radius: 8px;
              cursor: pointer;
              transition: all 0.3s ease;
              display: flex;
              align-items: center;
              gap: 8px;
              color: #333;
          }

          .dropdown-item i {
              color: #d4af37;
              width: 16px;
              text-align: center;
          }

          .dropdown-item:hover {
              background: #f8f9fa;
          }

          .dropdown-item:hover i {
              color: #b8941f;
          }

          /* Dashboard-style content grid */
          .content-grid {
              display: grid;
              grid-template-columns: 2fr 1fr;
              gap: 2rem;
              margin-bottom: 2rem;
          }

          .recent-activity {
              background: #fff;
              padding: 2rem;
              border-radius: 15px;
              box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
              border: 1px solid #e0e0e0;
          }

          .recent-activity h3 {
              color: #333;
              font-size: 1.3rem;
              font-weight: 600;
              margin-bottom: 1.5rem;
              display: flex;
              align-items: center;
              gap: 10px;
          }

          .recent-activity h3 i {
              color: #d4af37;
          }

          .activity-item {
              display: flex;
              align-items: center;
              gap: 1rem;
              padding: 1rem 0;
              border-bottom: 1px solid #f1f3f4;
          }

          .activity-item:last-child {
              border-bottom: none;
          }

          .activity-icon {
              width: 40px;
              height: 40px;
              background: #f8f9fa;
              border-radius: 50%;
              display: flex;
              align-items: center;
              justify-content: center;
              color: #d4af37;
          }

          .activity-content h4 {
              color: #333;
              font-size: 1rem;
              font-weight: 600;
              margin-bottom: 0.25rem;
          }

          .activity-content p {
              color: #666;
              font-size: 0.9rem;
              margin: 0;
          }

          .quick-actions {
              background: #fff;
              padding: 2rem;
              border-radius: 15px;
              box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
              border: 1px solid #e0e0e0;
          }

          .quick-actions h3 {
              color: #333;
              font-size: 1.3rem;
              font-weight: 600;
              margin-bottom: 1.5rem;
              display: flex;
              align-items: center;
              gap: 10px;
          }

          .quick-actions h3 i {
              color: #d4af37;
          }

          .action-buttons {
              display: flex;
              flex-direction: column;
              gap: 1rem;
          }

          .action-btn {
              display: flex;
              align-items: center;
              gap: 0.75rem;
              padding: 1rem;
              background: #f8f9fa;
              border: 1px solid #e0e0e0;
              border-radius: 10px;
              color: #333;
              text-decoration: none;
              transition: all 0.3s ease;
              font-weight: 500;
          }

          .action-btn:hover {
              background: #d4af37;
              color: #000;
              transform: translateY(-2px);
              box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
          }

          .action-btn i {
              color: #d4af37;
              width: 20px;
              text-align: center;
          }

          .action-btn:hover i {
              color: #000;
          }

          .chart-container {
              background: #fff;
              padding: 2rem;
              border-radius: 15px;
              box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
              border: 1px solid #e0e0e0;
              margin-bottom: 2rem;
          }

          .chart-container h3 {
              color: #333;
              font-size: 1.3rem;
              font-weight: 600;
              margin-bottom: 1.5rem;
              display: flex;
              align-items: center;
              gap: 10px;
          }

          .chart-container h3 i {
              color: #d4af37;
          }

          .chart-placeholder {
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
              padding: 3rem;
              background: #f8f9fa;
              border-radius: 10px;
              color: #666;
              font-size: 1.1rem;
          }

          .chart-placeholder i {
              font-size: 3rem;
              color: #d4af37;
              margin-bottom: 1rem;
          }
        </style>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
        <script>
          // Show/hide date pickers based on time period
          document.addEventListener('DOMContentLoaded', function() {
            var timePeriod = document.getElementById('filterTimePeriod');
            var startDate = document.getElementById('filterStart');
            var endDate = document.getElementById('filterEnd');
            var dash = document.getElementById('dateDash');
            function updateDatePickers() {
              if (timePeriod.value === 'custom') {
                startDate.style.display = '';
                endDate.style.display = '';
                dash.style.display = '';
              } else {
                startDate.style.display = 'none';
                endDate.style.display = 'none';
                dash.style.display = 'none';
              }
            }
            timePeriod.addEventListener('change', updateDatePickers);
            updateDatePickers();
          });
          // Demo data for KPIs
          const kpiData = {
            bookings: 1240,
            revenue: 245000,
            occupancy: 87,
            satisfaction: '9.1/10'
          };
          document.getElementById('kpiBookings').textContent = kpiData.bookings;
          document.getElementById('kpiRevenue').textContent = '$' + kpiData.revenue.toLocaleString();
          document.getElementById('kpiOccupancy').textContent = kpiData.occupancy + '%';
          document.getElementById('kpiSatisfaction').textContent = kpiData.satisfaction;
          // Color palette
          const palette = [
            '#2d5be3', '#f7b731', '#26de81', '#fc5c65', '#8854d0', '#fd9644', '#45aaf2', '#a55eea', '#20bf6b', '#4b6584'
          ];
          // Chart.js chart instances
          let bookingsChart, revenueChart, roomTypeChart, demographicsChart;
          // Helper to randomize data for demo
          function randomData(len, min, max) {
            return Array.from({length: len}, () => Math.floor(Math.random() * (max - min + 1)) + min);
          }
          // Update charts with new demo data
          function updateCharts() {
            // Get filter values
            const period = document.getElementById('filterTimePeriod').value;
            const roomType = document.getElementById('filterRoomType').value;
            const channel = document.getElementById('filterChannel').value;
            const custType = document.getElementById('filterCustomerType').value;
            // Demo: update chart data and titles
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'];
            bookingsChart.data.datasets[0].data = randomData(7, 100, 250);
            bookingsChart.options.plugins.title = {display:true, text:`Bookings (${roomType}, ${period.replace(/([A-Z])/g, ' $1')})`};
            bookingsChart.update();
            revenueChart.data.datasets[0].data = randomData(7, 10000, 25000);
            revenueChart.options.plugins.title = {display:true, text:`Revenue (${channel}, ${period.replace(/([A-Z])/g, ' $1')})`};
            revenueChart.update();
            roomTypeChart.data.datasets[0].data = randomData(6, 10, 30);
            roomTypeChart.options.plugins.title = {display:true, text:`Room Type Popularity (${roomType})`};
            roomTypeChart.update();
            demographicsChart.data.datasets[0].data = randomData(5, 10, 40);
            demographicsChart.options.plugins.title = {display:true, text:`Guest Demographics (${custType})`};
            demographicsChart.update();
            // Ensure datalabels plugin is used on update
            roomTypeChart.options.plugins.datalabels = {
              color: '#222', font: { weight: 'bold', size: 14 },
              formatter: (value, ctx) => {
                const data = ctx.chart.data.datasets[0].data;
                const total = data.reduce((a, b) => a + b, 0);
                const pct = total ? (value / total * 100) : 0;
                return pct > 0 ? pct.toFixed(1) + '%' : '';
              }
            };
            demographicsChart.options.plugins.datalabels = {
              color: '#222', font: { weight: 'bold', size: 14 },
              formatter: (value, ctx) => {
                const data = ctx.chart.data.datasets[0].data;
                const total = data.reduce((a, b) => a + b, 0);
                const pct = total ? (value / total * 100) : 0;
                return pct > 0 ? pct.toFixed(1) + '%' : '';
              }
            };
          }
          // Responsive/clickable Filter button logic
          document.addEventListener('DOMContentLoaded', function() {
            var filterBtn = document.getElementById('applyFiltersBtn');
            filterBtn.addEventListener('click', function() {
              filterBtn.disabled = true;
              filterBtn.textContent = 'Filtering...';
              setTimeout(() => {
                updateCharts();
                filterBtn.disabled = false;
                filterBtn.textContent = 'Filter';
              }, 700);
            });
          });
          bookingsChart = new Chart(document.getElementById('bookingsTrendChart').getContext('2d'), {
            type: 'line',
            data: {
              labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
              datasets: [{
                label: 'Bookings',
                data: [120, 150, 170, 140, 200, 180, 210],
                borderColor: palette[0],
                backgroundColor: 'rgba(45,91,227,0.10)',
                tension: 0.4,
                fill: true,
                pointBackgroundColor: palette[1],
                pointBorderColor: palette[0],
                pointRadius: 5
              }]
            },
            options: {
              plugins: { legend: { display: false } },
              scales: { x: { grid: { display: false } }, y: { beginAtZero: true } }
            }
          });
          revenueChart = new Chart(document.getElementById('revenueChart').getContext('2d'), {
            type: 'bar',
            data: {
              labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
              datasets: [{
                label: 'Revenue',
                data: [12000, 15000, 17000, 14000, 20000, 18000, 21000],
                backgroundColor: palette.slice(0,7),
                borderRadius: 6
              }]
            },
            options: {
              plugins: { legend: { display: false } },
              scales: { x: { grid: { display: false } }, y: { beginAtZero: true } }
            }
          });
          roomTypeChart = new Chart(document.getElementById('roomTypePieChart').getContext('2d'), {
            type: 'pie',
            data: {
              labels: ['Pearl Signature', 'Deluxe', 'Premium', 'Executive', 'Luxury Suite', 'Family Suite'],
              datasets: [{
                data: [18, 22, 15, 20, 13, 12],
                backgroundColor: palette.slice(0,6)
              }]
            },
            options: {
              plugins: {
                legend: { position: 'bottom', labels: { color: '#222', font: { weight: 'bold' } } },
                datalabels: {
                  color: '#222',
                  font: { weight: 'bold', size: 14 },
                  formatter: (value, ctx) => {
                    const data = ctx.chart.data.datasets[0].data;
                    const total = data.reduce((a, b) => a + b, 0);
                    const pct = total ? (value / total * 100) : 0;
                    return pct > 0 ? pct.toFixed(1) + '%' : '';
                  }
                }
              }
            },
            plugins: [ChartDataLabels]
          });
          demographicsChart = new Chart(document.getElementById('demographicsChart').getContext('2d'), {
            type: 'doughnut',
            data: {
              labels: ['USA', 'UK', 'India', 'Germany', 'Other'],
              datasets: [{
                data: randomData(5, 10, 40),
                backgroundColor: palette.slice(0,5)
              }]
            },
            options: {
              plugins: {
                legend: { position: 'bottom', labels: { color: '#222', font: { weight: 'bold' } } },
                datalabels: {
                  color: '#222',
                  font: { weight: 'bold', size: 14 },
                  formatter: (value, ctx) => {
                    const data = ctx.chart.data.datasets[0].data;
                    const total = data.reduce((a, b) => a + b, 0);
                    const pct = total ? (value / total * 100) : 0;
                    return pct > 0 ? pct.toFixed(1) + '%' : '';
                  }
                }
              }
            },
            plugins: [ChartDataLabels]
          });
          // Top Rooms
          const topRooms = [
            'Pearl Signature Room',
            'Deluxe Room',
            'Premium Room',
            'Executive Room',
            'Luxury Suite',
            'Family Suite'
          ];
          document.getElementById('topRoomsList').innerHTML = topRooms.map(r => `<li>${r}</li>`).join('');
          // Loyal Customers
          const loyalCustomers = ['John Smith', 'Linda Evans', 'Rajesh Kumar', 'Anna Müller', 'David Brown'];
          document.getElementById('loyalCustomersList').innerHTML = loyalCustomers.map(c => `<li>${c}</li>`).join('');
          // Most Booked Channel
          const mostBookedChannels = [
            { channel: 'Website', count: 620 },
            { channel: 'Phone', count: 410 },
            { channel: 'Walk-in', count: 210 }
          ];
          document.getElementById('mostBookedChannelList').innerHTML = mostBookedChannels.map(c => `<li><b>${c.channel}:</b> ${c.count} bookings</li>`).join('');
          // Cancellation Trends
          new Chart(document.getElementById('cancellationChart').getContext('2d'), {
            type: 'line',
            data: {
              labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
              datasets: [{
                label: 'Cancellations',
                data: [8, 12, 7, 10, 6, 9, 5],
                borderColor: '#d32f2f',
                backgroundColor: 'rgba(211,47,47,0.12)',
                tension: 0.4,
                fill: true
              }]
            },
            options: {
              plugins: { legend: { display: false } },
              scales: { x: { grid: { display: false } }, y: { beginAtZero: true } }
            }
          });
          // Target Progress
          const targetProgressBar = document.getElementById('targetProgressBar');
          targetProgressBar.style.width = '92%';
          targetProgressBar.textContent = '92%';
          targetProgressBar.style.minWidth = 'fit-content';
          // Feedback Summary
          document.getElementById('feedbackSummary').innerHTML = `
            <div style='font-size:1.1em; margin-bottom:0.5em;'>"Wonderful stay, great staff!"</div>
            <div style='font-size:1em; color:#FFD700;'>★★★★★</div>
            <div style='font-size:0.95em; margin-top:0.5em;'>Most guests praise cleanliness, comfort, and service. Some suggest more dining options.</div>
          `;
          // KPI: YoY and MoM Comparison mini bar charts
          let kpiYoYChart, kpiMoMChart;
          document.addEventListener('DOMContentLoaded', function() {
            kpiYoYChart = new Chart(document.getElementById('kpiYoYChart').getContext('2d'), {
              type: 'bar',
              data: {
                labels: ['2021', '2022', '2023', '2024', '2025'],
                datasets: [{
                  label: 'Bookings',
                  data: [900, 1050, 1120, 1200, 1240],
                  backgroundColor: ['#2d5be3', '#f7b731', '#26de81', '#fc5c65', '#8854d0'],
                  borderRadius: 4
                }]
              },
              options: {
                plugins: { legend: { display: false } },
                scales: {
                  x: { grid: { display: false }, ticks: { color: '#555', font: { size: 12 } } },
                  y: { grid: { display: false }, ticks: { color: '#555', font: { size: 12 }, stepSize: 200, beginAtZero: true } }
                },
                responsive: false,
                maintainAspectRatio: false
              }
            });
            kpiMoMChart = new Chart(document.getElementById('kpiMoMChart').getContext('2d'), {
              type: 'bar',
              data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
                datasets: [{
                  label: 'Bookings',
                  data: [120, 150, 170, 140, 200, 180, 210],
                  backgroundColor: ['#2d5be3', '#f7b731', '#26de81', '#fc5c65', '#8854d0', '#fd9644', '#45aaf2'],
                  borderRadius: 4
                }]
              },
              options: {
                plugins: { legend: { display: false } },
                scales: {
                  x: { grid: { display: false }, ticks: { color: '#555', font: { size: 12 } } },
                  y: { grid: { display: false }, ticks: { color: '#555', font: { size: 12 }, stepSize: 50, beginAtZero: true } }
                },
                responsive: false,
                maintainAspectRatio: false
              }
            });
            // Set demo values for new KPIs
            document.getElementById('kpiRepeatRate').textContent = '38%';
            document.getElementById('kpiPeakTime').textContent = 'Sat 7-9pm';
          });
        </script>
      </div>
    </div>
  </div>
  <script>
    function toggleDropdown() {
      const dropdown = document.getElementById('adminDropdown');
      dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
    }

    // Close dropdown when clicking outside
    document.addEventListener('click', function(event) {
      const profile = document.querySelector('.admin-profile');
      const dropdown = document.getElementById('adminDropdown');
      if (!profile.contains(event.target)) {
        dropdown.style.display = 'none';
      }
    });

    // Logout function
    function logoutAdmin() {
      if (confirm('Are you sure you want to logout?')) {
        // Clear any admin session data
        localStorage.removeItem('admin_logged_in');
        localStorage.removeItem('admin_username');
        // Redirect to login page
        window.location.href = 'index.html';
      }
    }
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/js/all.min.js"></script>
</body>
</html> 